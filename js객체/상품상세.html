<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      #wrap {
        display: flex;
        gap: 20px;
      }
      img {
        width: 100%;
      }
      .left {
        width: 300px;
        padding: 20px;
        position: relative;
      }
      .slideBox {
        position: relative;
        overflow: hidden;
        height: 300px;
      }
      .slide {
        /* ul 태그 */
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        position: relative;
      }
      .slideItem {
        /* li 태그 */
        width: 300px;
        position: absolute;
        opacity: 0;
        transition: opacity 0.5s;
      }
      .slideItem.active {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <div id="wrap">
      <div class="left">
        <div class="slideBox">
          <ul class="slide">
            <li class="slideItem active">
              <img class="item" />
            </li>
            <li class="slideItem">
              <img class="item" />
            </li>
            <li class="slideItem">
              <img class="item" />
            </li>
          </ul>
        </div>
      </div>
      <div class="right">
        <input type="hidden" id="price" value="25000" />
        <h3>키보드</h3>
        <p>가격 : 25,000원</p>
        <div>
          <select id="size">
            <option value="적축">적축</option>
            <option value="청축">청축</option>
            <option value="갈축">갈축</option>
          </select>
        </div>
        <div>
          수량 : <input type="number" id="amount" min="1" max="10" value="1" />
        </div>
        <button id="cart">장바구니</button>
        <button id="buy">구매</button>
      </div>
    </div>
  </body>
</html>
<script>
    const cartURL = "http://dwstd.ipdisk.co.kr/dataview/test.php";

  //장바구니 버튼 클릭하면 장바구니에 저장 될수있게
  //현재 선택한 값들을 서버에 전달하기

  document.querySelector("#cart").addEventListener("click", cartSave);

  async function cartSave() {
    let price = document.getElementById("price").value;
    let amount = document.getElementById("amount").value;
    let size = document.getElementById("size").value;

    //객체 생성 및 json
    let data = { itemPrice: price,
         itemMount: amount,
          itemSize: size };

    let jsonData = JSON.stringify(data);
    //서버에 보내기

    const response = await fetch("http://dwstd.ipdisk.co.kr/dataview/test.php",{
        method : "POST",
        headers : { "Content-Type":"application/json"},
        body : jsonData
    });

    const result = await response.json();
    if(result.ok){
        confirm("장바구니에 담았습니다. 이동하시겠습니까?");
    }else{
        alert("장바구니 담기 실패");
    }
  }

  const imgList = ["1.jpg", "2.jpg", "3.jpg"];

  const item = document.getElementsByClassName("item");
  for (var i in item) {
    item[i].src = "./" + imgList[i];
  }

  const slides = document.querySelectorAll(".slideItem");
  let idx = 0; //slide 는 li 태그 여러개 즉, 배열

  setInterval(function () {
    // 이미지 슬라이드 만들기
    slides[idx].classList.remove("active");
    idx++;

    if (idx >= slides.length) idx = 0;
    slides[idx].classList.add("active");
  }, 3000);

  // setInterval(함수(실행내용), 시간(ms (1000ms = 1s(초))));

  // 3초에 한번씩 이동시켜서 보이게 하기
  // 시간을 다루는 함수 : setTimeout, setInterval
  // setTimeout : 지정한 시간 이후에 단한번만 실행
  // setInterval : 지정한 시간 간격으로 실행

  //     let a = -300;

  //   setInterval(function () {
  //     // 이미지 슬라이드 만들기
  //     let slide = document.querySelector(".slide");
  //     slide.style.left = a + "px";

  //     if (a == -600) a = 0;
  //     else a += -300;
  //   }, 3000);
</script>
